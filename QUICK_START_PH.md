# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - ESP32 pH Sensor

## ‚ö° –ó–∞ 5 –º–∏–Ω—É—Ç –¥–æ –ø–µ—Ä–≤—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π!

### 1Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ

```
PH-4502C    ‚Üí    ESP32
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
VCC         ‚Üí    VIN (5V)
GND         ‚Üí    GND
Po          ‚Üí    GPIO 34
```

### 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Wi-Fi

–û—Ç–∫—Ä–æ–π—Ç–µ `src/main.cpp` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:

```cpp
const char* WIFI_SSID = "YOUR_WIFI_SSID";       // ‚Üê –í–∞—à Wi-Fi
const char* WIFI_PASSWORD = "YOUR_WIFI_PASSWORD"; // ‚Üê –í–∞—à –ø–∞—Ä–æ–ª—å
```

### 3Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É

**PlatformIO:**
```bash
pio run --target upload
```

**Arduino IDE:**
- –û—Ç–∫—Ä–æ–π—Ç–µ `src/main.cpp`
- –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞—Ç—É: ESP32 Dev Module
- –ù–∞–∂–º–∏—Ç–µ Upload

### 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

–û—Ç–∫—Ä–æ–π—Ç–µ Serial Monitor (115200 baud):

```
[WiFi] –ü–æ–¥–∫–ª—é—á–µ–Ω–æ!
[MQTT] –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –±—Ä–æ–∫–µ—Ä—É!
–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!

--- –ò–∑–º–µ—Ä–µ–Ω–∏–µ pH ---
–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ: 1.523 V
pH: 7.15
```

‚úÖ **–ì–æ—Ç–æ–≤–æ!** –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ MQTT –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥.

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Home Assistant

–¢–æ–ø–∏–∫ MQTT: `sensor/ph/value`

–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:
```json
{
  "pH": 7.15,
  "voltage": 1.523,
  "timestamp": 12345
}
```

–î–æ–±–∞–≤—å—Ç–µ –≤ `configuration.yaml`:

```yaml
mqtt:
  sensor:
    - name: "pH Sensor"
      state_topic: "sensor/ph/value"
      value_template: "{{ value_json.pH }}"
      unit_of_measurement: "pH"
```

---

## üîß –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫—É:

1. –ü–æ–≥—Ä—É–∑–∏—Ç–µ –¥–∞—Ç—á–∏–∫ –≤ —Ä–∞—Å—Ç–≤–æ—Ä pH 7.0
2. –ó–∞–ø–∏—à–∏—Ç–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏–∑ Serial Monitor
3. –ü–æ–≥—Ä—É–∑–∏—Ç–µ –¥–∞—Ç—á–∏–∫ –≤ —Ä–∞—Å—Ç–≤–æ—Ä pH 4.0
4. –ó–∞–ø–∏—à–∏—Ç–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ
5. –û–±–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–¥–µ:

```cpp
const float ACID_VOLTAGE = 2.032;  // ‚Üê –í–∞—à–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ pH 4.0
const float PH_SLOPE = 0.1773;     // ‚Üê (V_pH4 - V_pH7) / (-3.0)
```

üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: `ph_calibration_guide.txt`

---

## üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| GPIO –ø–∏–Ω | 34 |
| MQTT –±—Ä–æ–∫–µ—Ä | 192.168.1.173:1883 |
| –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ | 30 —Å–µ–∫—É–Ω–¥ |
| –£—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ | 10 –∏–∑–º–µ—Ä–µ–Ω–∏–π |

---

## üÜò –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Wi-Fi?**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSID –∏ –ø–∞—Ä–æ–ª—å
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–æ—É—Ç–µ—Ä –≤ –∑–æ–Ω–µ –¥–æ—Å—Ç—É–ø–∞
- –†–æ—É—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å 2.4 GHz

**–ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ MQTT?**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP –∞–¥—Ä–µ—Å –±—Ä–æ–∫–µ—Ä–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 1883 –æ—Ç–∫—Ä—ã—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MQTT –±—Ä–æ–∫–µ—Ä –∑–∞–ø—É—â–µ–Ω

**–°—Ç—Ä–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è pH?**
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫—É
- –ó–∞–º–æ—á–∏—Ç–µ —ç–ª–µ–∫—Ç—Ä–æ–¥ –≤ –≤–æ–¥–µ –Ω–∞ 30 –º–∏–Ω—É—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ GPIO 34

**–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è?**
- –£–≤–µ–ª–∏—á—å—Ç–µ `NUM_SAMPLES` –¥–æ 20
- –î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä 100nF –Ω–∞ –≤—Ö–æ–¥ Po
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- üìñ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `README_PH_SENSOR.md`
- üîå **–°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**: `ph_sensor_wiring.txt`
- ‚öôÔ∏è **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞**: `ph_calibration_guide.txt`
- üè† **Home Assistant**: `home_assistant_ph_config.yaml`

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**PlatformIO:**
```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è
pio run

# –ó–∞–≥—Ä—É–∑–∫–∞
pio run --target upload

# Serial Monitor
pio device monitor

# –í—Å–µ –≤–º–µ—Å—Ç–µ
pio run --target upload && pio device monitor
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ MQTT:**
```bash
# –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ç–æ–ø–∏–∫
mosquitto_sub -h 192.168.1.173 -t "sensor/ph/value"

# –¢–µ—Å—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
mosquitto_pub -h 192.168.1.173 -t "sensor/ph/value" -m '{"pH":7.0,"voltage":1.5}'
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] –î–∞—Ç—á–∏–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ GPIO 34
- [ ] Wi-Fi –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –∫–æ–¥–µ
- [ ] –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ ESP32
- [ ] Serial Monitor –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- [ ] –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ MQTT
- [ ] Home Assistant –≤–∏–¥–∏—Ç –¥–∞—Ç—á–∏–∫
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞

---

**–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç?** –û—Ç–ª–∏—á–Ω–æ! üéâ

**–ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã?** –°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `README_PH_SENSOR.md`

---

*–í–µ—Ä—Å–∏—è: 1.0 | –î–∞—Ç–∞: –î–µ–∫–∞–±—Ä—å 2025*

